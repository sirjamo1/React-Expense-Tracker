"use strict";(self.webpackChunkreact_expense_tracker=self.webpackChunkreact_expense_tracker||[]).push([[896],{7896:function(e,a,n){n.r(a),n.d(a,{default:function(){return y}});var t=n(4165),r=n(1413),s=n(5861),c=n(885),i=n(2791),l=n(7039),o=n(2426),u=n.n(o),d=n(3504),h=n(9257),p=n(8528),x=n(4805),m=n(6724),v=n(7794),f=n(2436),b=(n(444),n(184));function j(e){var a=e.chartData;return(0,b.jsx)(f.$Q,{data:a,options:{responsive:!0,plugins:{tooltip:{callbacks:{label:function(e){return console.log(e.raw.label),"".concat(e.raw.label," $").concat(e.raw.y)}}}}}})}function g(e){var a=e.chartData;return(0,b.jsx)(f.x1,{data:a,options:{responsive:!0,spanGaps:!0,tension:.4,plugins:{tooltip:{callbacks:{label:function(e){return console.log(e.raw.label),"".concat(e.raw.label," $").concat(e.raw.y)}}}}}})}var y=function(){var e=(0,v.a)().user,a=(0,i.useState)(e.displayName),n=(0,c.Z)(a,2),o=(n[0],n[1],(0,m.hJ)(l.db,"expenseData")),f=(0,m.hJ)(l.db,"userData"),y=(0,i.useState)([]),N=(0,c.Z)(y,2),Z=N[0],E=N[1],S=sessionStorage.getItem("uid"),k=(0,i.useState)([]),I=(0,c.Z)(k,2),C=I[0],D=I[1],w=(0,i.useState)([]),$=(0,c.Z)(w,2),O=$[0],M=$[1],Y=(0,i.useState)(),R=(0,c.Z)(Y,2),T=R[0],A=R[1],J=(0,i.useState)(),F=(0,c.Z)(J,2),B=F[0],_=F[1],L=(0,i.useState)(),P=(0,c.Z)(L,2),U=P[0],Q=P[1],q=(0,i.useState)(),G=(0,c.Z)(q,2),V=G[0],X=G[1],z=(0,i.useState)(),H=(0,c.Z)(z,2),K=H[0],W=H[1],ee=(0,i.useState)(),ae=(0,c.Z)(ee,2),ne=ae[0],te=ae[1],re=(0,i.useState)(),se=(0,c.Z)(re,2),ce=se[0],ie=se[1],le=(0,i.useState)(),oe=(0,c.Z)(le,2),ue=oe[0],de=oe[1],he=(0,i.useState)(),pe=(0,c.Z)(he,2),xe=pe[0],me=pe[1],ve=(0,i.useState)(),fe=(0,c.Z)(ve,2),be=fe[0],je=fe[1],ge=(0,i.useState)(),ye=(0,c.Z)(ge,2),Ne=ye[0],Ze=ye[1],Ee=(0,i.useState)(),Se=(0,c.Z)(Ee,2),ke=Se[0],Ie=Se[1],Ce=(0,i.useState)("total"),De=(0,c.Z)(Ce,2),we=De[0],$e=De[1],Oe=(0,i.useState)("Bar"),Me=(0,c.Z)(Oe,2),Ye=Me[0],Re=Me[1],Te=(0,x.useMediaQuery)({query:"(max-width: 400px)"}),Ae=(0,i.useState)({labels:"No Data",datasets:[{label:"No Data",data:"0"}]}),Je=(0,c.Z)(Ae,2),Fe=Je[0],Be=Je[1],_e=Te?["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]:["January","February","March","April","May","June","July","August","September","October","November","December"],Le=["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"];if(null==e.displayName){var Pe=function(){var a=(0,s.Z)((0,t.Z)().mark((function a(){var n,s,c,i;return(0,t.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,m.PL)((0,m.IO)(f,(0,m.ar)("uid","==",S)));case 2:for(n=a.sent,console.log(n),s=n.docs.map((function(e){return(0,r.Z)((0,r.Z)({},e.data()),{},{id:e.id})})),c=[],i=0;i<s.length;i++)s[i].uid===S&&c.push(s[i].fullName);(0,h.ck)(e,{displayName:c[0]});case 8:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();Pe()}(0,i.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var a,n,s,c,i,l,u,d,h,p,x,v,f,b,j,g,y;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.PL)((0,m.IO)(o,(0,m.ar)("uid","==",S),(0,m.Xo)("date","desc")));case 2:for(a=e.sent,n=a.docs.map((function(e){return(0,r.Z)((0,r.Z)({},e.data()),{},{id:e.id})})),s=[],c=[],i=0,l=[],u=0,d=[],h=0,p=[],x=0,v=[],f=0,b=[],j=0,g=[],y=0;y<n.length;y++)s.push(n[y]),g.push(n[y]),n[y].date.slice(0,4)===Ue.slice(0,4)&&("expense"===n[y].incomeOrExpense?(c.push(n[y]),i+=parseInt(n[y].amount)):(l.push(n[y]),u+=parseInt(n[y].amount))),n[y].date.slice(0,7)===Ue.slice(0,7)&&("expense"===n[y].incomeOrExpense?(d.push(n[y]),h+=parseInt(n[y].amount)):(p.push(n[y]),x+=parseInt(n[y].amount))),n[y].date.slice(0,10)===Ue&&("expense"===n[y].incomeOrExpense?(v.push(n[y]),f+=parseInt(n[y].amount)):(b.push(n[y]),j+=parseInt(n[y].amount)));E(s.reverse()),A(c.reverse()),_(i),Q(l.reverse()),X(u),W(d.reverse()),de(h),te(p.reverse()),ie(x),me(v.reverse()),je(f),Ze(b.reverse()),Ie(j),M(g);case 33:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var Ue=u()().format("YYYY-MM-DD");(0,i.useEffect)((function(){!function(){var e=[];Z.map((function(a){a.recurring&&e.push(a)})),D(e)}()}),[Z]);var Qe=function(e){var a=parseInt(e.substring(2,4)),n=parseInt(e.substring(5,7))+1,t=parseInt(e.substring(8,10));return n<12?"".concat(a,"-").concat(n<10?"0".concat(n):n,"-").concat(t<10?"0".concat(t):t):13===n?(n=1,"".concat(a+1,"-").concat(n<10?"0".concat(n):n,"-").concat(t<10?"0".concat(t):t)):void 0},qe=C.map((function(e){return e.recurring?(0,b.jsxs)("div",{className:"income"===e.incomeOrExpense?"recurring-div rec-income":"recurring-div rec-expense",children:[(0,b.jsx)("div",{children:(0,b.jsx)("p",{children:e.title})}),(0,b.jsx)("div",{children:(0,b.jsxs)("p",{children:["Recurs: ",Qe(e.date)]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("p",{className:"income"===e.incomeOrExpense?"income":"expense",children:["$",e.amount]})})]},e.key):(0,b.jsx)("div",{className:"recurring-div-income",children:(0,b.jsx)("p",{children:"No recurring data found"})})})),Ge=O.slice(0,3).map((function(e){return(0,b.jsxs)("div",{className:"income"===e.incomeOrExpense?"recent-transactions-data income":"recent-transactions-data expense",children:[(0,b.jsx)("div",{children:(0,b.jsx)("p",{children:e.title})}),Te?(0,b.jsx)(b.Fragment,{}):(0,b.jsx)("div",{children:(0,b.jsx)("p",{children:e.type})}),(0,b.jsx)("div",{children:"income"===e.incomeOrExpense?(0,b.jsxs)("p",{children:["$",e.amount]}):(0,b.jsxs)("p",{children:["-$",e.amount]})}),(0,b.jsx)("div",{children:(0,b.jsx)("p",{children:e.date.substring(0,10)})})]},e.key)})),Ve=Ue.slice(5,7),Xe=function(){for(var e=new Date,a=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),n=[],t=1;t<=a;t++)n.push(e.getFullYear()+"-"+Ve+"-"+(t<10?"0"+t:t));return n}();(0,i.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var a,n,r,s,c,i,l,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T!=={}&&"total"===we?(a=[],_e.forEach((function(e){var n={month:e,amount:0,label:e};a.push(n)})),T.map((function(e){var n=parseInt(e.date.substring(5,7),10)-1;a[n].amount+=parseInt(e.amount)})),n=[],a.forEach((function(e){var a={x:e.month,y:e.amount,label:e.month};n.push(a)})),r=[],_e.forEach((function(e){var a={month:e,amount:0,label:e};r.push(a)})),U.map((function(e){var a=parseInt(e.date.substring(5,7),10)-1;r[a].amount+=parseInt(e.amount)})),s=[],r.forEach((function(e){var a={x:e.month,y:e.amount,label:e.month};s.push(a)})),Be({labels:_e.map((function(e){return e})),datasets:[{label:"Yearly Expenses",fill:!0,data:n,borderColor:"rgba(255, 6, 6, 1)",backgroundColor:"rgba(255, 6, 6, 0.3)",borderRadius:2},{label:"Yearly Income",fill:!0,data:s,borderColor:"rgba(6, 236, 6, 1)",backgroundColor:"rgba(6, 236, 6, 0.2)",borderRadius:2}]})):K!=={}&&"monthly"===we?(c=[],K.forEach((function(e){var a={x:e.date.substring(0,10),y:e.amount,label:e.title};c.push(a)})),i=[],ne.forEach((function(e){var a={x:e.date.substring(0,10),y:e.amount,label:e.title};i.push(a)})),Be({labels:Xe.map((function(e){return e})),datasets:[{label:_e[parseInt(Ve)-1],data:c,fill:!0,borderColor:"rgba(255, 6, 6, 1)",backgroundColor:"rgba(255, 6, 6, 0.3)",borderRadius:2},{label:_e[parseInt(Ve)-1],data:i,fill:!0,borderColor:"rgba(6, 236, 6, 1)",backgroundColor:"rgba(6, 236, 6, 0.3)",borderRadius:2}]})):xe!=={}&&"daily"===we&&(l=[],xe.forEach((function(e){var a={x:e.date.substring(11,13),y:e.amount,label:e.title};l.push(a)})),o=[],Ne.forEach((function(e){var a={x:e.date.substring(11,13),y:e.amount,label:e.title};o.push(a)})),Be({labels:Le.map((function(e){return e})),datasets:[{label:"Daily Expenses",data:l,fill:!0,borderColor:"rgba(255, 6, 6, 1)",backgroundColor:"rgba(255, 6, 6, 0.3)",borderRadius:2,active:!0},{label:"Daily Income",data:o,fill:!0,borderColor:"rgba(6, 236, 6, 1)",backgroundColor:"rgba(6, 236, 6, 0.3)",borderRadius:2,active:!0}]}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[Z,we]);var ze=(0,b.jsxs)("div",{className:"three-totals",children:[(0,b.jsxs)("div",{value:"total",className:"total"===we?"three-totals-activated":null,onClick:function(){$e("total")},children:[(0,b.jsx)("h5",{children:"Yearly"}),(0,b.jsxs)("h6",{children:["Income : $",(0,b.jsx)("span",{className:"positive",children:V})]}),(0,b.jsxs)("h6",{children:["Expenses : $-",(0,b.jsx)("span",{className:"negative",children:B})]}),(0,b.jsxs)("h6",{children:["Total : $",(0,b.jsx)("span",{className:V-B>=0?"positive":"negative",children:V-B})]})]}),(0,b.jsxs)("div",{className:"monthly"===we?"three-totals-activated":null,onClick:function(){$e("monthly")},children:[(0,b.jsx)("h5",{children:"Monthly"}),(0,b.jsxs)("h6",{children:["Income : $",(0,b.jsx)("span",{className:"positive",children:ce})]}),(0,b.jsxs)("h6",{children:["Expenses : $-",(0,b.jsx)("span",{className:"negative",children:ue})]}),(0,b.jsxs)("h6",{children:["Total : $",(0,b.jsx)("span",{className:ce-ue>=0?"positive":"negative",children:ce-ue})]})]}),(0,b.jsxs)("div",{className:"daily"===we?"three-totals-activated":null,onClick:function(){$e("daily")},children:[(0,b.jsx)("h5",{children:"Daily"}),(0,b.jsxs)("h6",{children:["Income : $",(0,b.jsx)("span",{className:"positive",children:ke})]}),(0,b.jsxs)("h6",{children:["Expenses : $-",(0,b.jsx)("span",{className:"negative",children:be})]}),(0,b.jsxs)("h6",{children:["Total : $",(0,b.jsx)("span",{className:ke-be>=0?"positive":"negative",children:ke-be})]})]})]});return(0,b.jsxs)("div",{className:"dashboard-container",children:[(0,b.jsx)(p.Z,{headerTitle:"Dashboard"}),(0,b.jsxs)("div",{className:"left-and-right-container",children:[(0,b.jsxs)("div",{className:"leftside-container",children:[ze,(0,b.jsx)("div",{className:"chart-container",children:"Bar"===Ye?(0,b.jsx)(g,{chartData:Fe}):(0,b.jsx)(j,{chartData:Fe})}),(0,b.jsxs)("div",{className:"recent-transactions-title",children:[(0,b.jsx)("h4",{children:"Recent Transactions"}),(0,b.jsxs)("h5",{onClick:function(){Re("Bar"===Ye?"Line":"Bar")},children:["Change to ",Ye," Chart"]}),(0,b.jsx)("button",{children:(0,b.jsx)(d.rU,{to:"/transactions",children:"View All"})})]}),(0,b.jsxs)("div",{className:"recent-transactions-header",children:[(0,b.jsx)("p",{children:"NAME/BUSINESS"}),Te?(0,b.jsx)(b.Fragment,{}):(0,b.jsx)("p",{children:"TYPE"}),(0,b.jsx)("p",{children:"AMOUNT"}),(0,b.jsx)("p",{children:"DATE"})]}),Ge]}),(0,b.jsxs)("div",{className:"rightside-container",children:[(0,b.jsx)("h4",{children:"Recurring Transactions"}),(0,b.jsx)("div",{className:"recurring-data-container",children:qe})]})]})]})}}}]);
//# sourceMappingURL=896.ad4f9b7a.chunk.js.map